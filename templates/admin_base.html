{% extends "base.html" %}
{% macro delete_entity_modal() %}
    <div class="modal fade" id="delete-entity-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Удаление сущности</h4>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning" id="del-relatives-warning">
                        Удаление документа из этого списка приведет к его
                        удалению из всех услуг!
                    </div>
                    <p>Вы уверены, что хотите удалить эту сущность?</p>
                    <div class="alert alert-info">
                        <p><b>Класс:</b> <span id="del-entity-kind"></span></p>
                        <p>
                            <b>Значение:</b> <span id="del-entity-repr"></span>
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger"
                            data-loading-text="Удаляю..."
                            id="confirm-delete-btn">
                        Удалить
                    </button>
                    <button type="button" class="btn btn-default"
                            data-dismiss="modal">
                        Не надо!
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="delete-entity-result-modal">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                {# Here be message #}
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal"
                        class="btn btn-primary">
                    Закрыть
                </button>
            </div>
        </div>
    </div>
{% endmacro %}
{% block title_affix %}.Admin{% endblock %}
{% block common_js %}
    <script src="/static/admin.js"></script>
    {# Handlebars templates #}
    {% raw %}
        <!-- Ajax loader -->
        <script id="hbt-ajax-loader" type="text/x-handlebars-template">
            <img src="/static/ajax-loader.gif" alt="Загрузка..."/>
        </script>
        <!-- List of entities in Bootstrap nav tabs -->
        <script id="hbt-list-in-tabs" type="text/x-handlebars-template">
            <a href="/admin/api/{{kind}}"
               class="list-group-item list-group-item-success">
                + Создать
            </a>
            {{#each items}}
            <div class="list-group-item">
                <a href="/admin/entity?id={{id}}" target="_blank">{{value}}</a>
                <a data-toggle="modal" class="pull-right" title="Удалить"
                   data-target="#delete-entity-modal">
                    <i class="glyphicon glyphicon-remove text-danger"></i>
                </a>
            </div>
            {{/each}}
        </script>
        <!-- Error message -->
        <script id="hbt-error" type="text/x-handlebars-template">
            <div class="alert alert-danger" role="alert">
                <h4>Ошибка!</h4>
                <p>
                    Во время выполнения действия произошла ошибка: {{status}},
                    {{error}}.
                </p>
            </div>
        </script>
        <!-- Success message -->
        <script id="hbt-success" type="text/x-handlebars-template">
            <div class="alert alert-danger" role="alert">
                <h4>Отлично!</h4>
                <p>Завершено успешно.</p>
            </div>
        </script>
    {% endraw %}
{% endblock %}
{% block navbar %}
    <div class="navbar navbar-inverse navbar-static-top">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="{{ uri_for('start') }}">
                    Kompleks
                </a>
            </div>
        </div>
    </div>
{% endblock %}